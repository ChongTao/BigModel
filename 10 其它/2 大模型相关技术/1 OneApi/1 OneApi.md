# 1 oneApi

**OneApi 是一个统一管理、转发和计量多个大模型 API 的网关服务**，对上提供**OpenAI 风格的统一接口**, 其目的是**让业务只对接一个 API，就能用所有大模型**，如果要单独对接各种模型，就会遇到下面的问题：

| 问题           | 描述                                          |
| :------------- | :-------------------------------------------- |
| 多平台对接复杂 | OpenAI、Azure、Claude、通义、智谱接口都不一样 |
| Key 管理混乱   | Key 泄露、滥用、难追踪                        |
| 成本不可控     | 无法限制用户调用额度                          |
| 服务不稳定     | 单一模型宕机就全挂                            |
| 无法统一监控   | 不知道谁在用、用多少                          |

## 1.1 核心能力

- 模型统一接入（OpenAI API 兼容）

  - `/v1/chat/completions`
  - `/v1/completions`
  - `/v1/embeddings`
  - `/v1/images`

- 多模型接入&路由

  支持同时接入OpenAI、Anthropic Claude、Google Gemini、阿里通义千问、本地模型（vLLM / llama.cpp）

- key与权限管理

  支持用户级、项目级 API Key管理

- 计费与统计

  Token使用量统计、QPS / 并发 / 成功率

- 限流与风控

  手动控制QPS、Token使用量、并发等

## 1.2 框架

```go
┌──────────────┐
│   前端 / 应用  │
│ (Web / App)  │
└──────┬───────┘
       │ OpenAI API 协议
┌──────▼──────────────────┐
│        OneAPI 网关        │
│────────────────────────│
│ 认证鉴权 | 限流 | 计费    │
│ 路由 | 协议转换 | 监控    │
└──────┬──────────────────┘
       │
┌──────▼─────────────┐
│  各类大模型服务      │
│ GPT / Claude / GLM │
└────────────────────┘
```

## 1.3 常见的OneAPI 开源项目

| 项目                     | 定位             | 核心技术栈      | OpenAI API 兼容 | 多模型支持 | 鉴权 / Key 管理 | 计费 / Token 统计 | 流式 SSE | UI 管理台 | 适合场景           |
| ------------------------ | ---------------- | --------------- | --------------- | ---------- | --------------- | ----------------- | -------- | --------- | ------------------ |
| **songquanpeng/one-api** | 完整 OneAPI 平台 | Go + Gin + GORM | ⭐⭐⭐⭐⭐           | ⭐⭐⭐⭐⭐      | ⭐⭐⭐⭐⭐           | ⭐⭐⭐⭐              | ⭐⭐⭐⭐     | ✅         | 企业 / RAG / Agent |
| **openai-proxy**         | 轻量代理         | Go / Node       | ⭐⭐⭐             | ⭐⭐         | ⭐               | ❌                 | ⭐⭐       | ❌         | Key 隐藏 / 小规模  |
| **llm-proxy**            | LLM 转发层       | Node / Go       | ⭐⭐⭐             | ⭐⭐         | ⭐               | ❌                 | ⭐⭐       | ❌         | 快速转发           |
| **Helicone**             | LLM 可观测性     | Node + DB       | ⭐⭐⭐⭐            | ⭐⭐⭐        | ⭐⭐              | ⭐⭐⭐⭐⭐             | ⭐⭐⭐⭐     | ✅         | 用量分析 / 审计    |
| **Kong + LLM 插件**      | API Gateway      | Kong / Lua      | ⭐⭐              | ⭐⭐⭐⭐       | ⭐⭐⭐⭐⭐           | ⭐⭐⭐               | ⭐⭐⭐      | ✅         | 大型平台           |
| **APISIX + AI 插件**     | 云原生网关       | APISIX / Lua    | ⭐⭐              | ⭐⭐⭐⭐       | ⭐⭐⭐⭐⭐           | ⭐⭐⭐               | ⭐⭐⭐      | ✅         | K8s / 企业网关     |