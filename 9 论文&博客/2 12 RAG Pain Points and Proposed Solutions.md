# 12 RAG Pain Points and Proposed Solutions

![](https://towardsdatascience.com/wp-content/uploads/2024/01/1D_pnaP69OEgSkiVxkBilZQ.png)

来源: https://towardsdatascience.com/12-rag-pain-points-and-proposed-solutions-43709939a28c/

12个RAG的痛点：

1. 内容缺失
2. 遗漏排名靠前的文档
3. 上下文限制-超出上下文
4. 未提取
5. 格式错误
6. 缺乏具体细节
7. 不完整
8. 数据摄取可扩展性
9. 结构化数据问答
10. 从复杂PDF文档提取数据
11. 备用模型策略
12. 大模型安全性

本博客基于[构建检索增强生成系统时遇到的七个故障点](https://arxiv.org/pdf/2401.05856.pdf)以及在开发过程中遇到的其他问题，汇总要解决方案。![图片来源：设计检索增强生成系统时的七个故障点](https://towardsdatascience.com/wp-content/uploads/2024/01/05pAddwy6ZAElg1hk.jpg)

## 1.1 内容缺失

当知识库中没有正确答案时，RAG系统可能会提供一个看似合理但实际上错误的答案，而不是直接表明无法给出答案。针对此类问题，提出两种解决方案：

- 数据清洗：去除噪音和无关信息（包括去除特殊字符、停用词）、纠错、去重等。
- 精心设计更好提示：通过优化提示词来提高回答质量。

## 1.2 关键文档遗漏

有时重要的文档可能不会出现在系统返回的顶端结果中，导致正确的答案被忽略，提供未能提供正确的反馈。

- 通过调整`chunk_size`和超参数调优`similarity_top_k`优化检索效果
- 检索结果rereank，将检索结果重新排序。

## 1.3 上下文限制

当答案被检索出来但是未放到生成答案的上下文中。

- 调整检索策略
- 微调嵌入

## 1.4 提取困难

当信息过载时，往往难以提取所需的答案，关键信息被遗漏，降低回答质量。研究表明这种情况往往发生在上下文中存在过多干扰或者矛盾信息时。

- 清理数据
- 即时压缩：[LongLLMLingua 研究项目/论文](https://arxiv.org/abs/2310.06839)中引入了长上下文环境下的提示压缩技术。

- 长上下文重排序：当关键信息谓语输入上下文开头或者结尾时，通过能获取更佳性能。

## 1.5 格式错误

当一个指令要求以特殊格式提取信息而被模型忽略时，解决方案：

- 更好的提示
- 输出格式解析，解析并格式化。

## 1.6 缺乏具体细节

回答可能不够详细，需要多次追问才能获取清晰的结果，需要更高级的检索策略来寻找解决方案。

- 高级检索策略

## 1.7 回答不全面

答案内容不全，缺少细节，但是细节存在检索中，答案未完全展示。

- 查询变换技巧，包括路由、查询改写、问题拆分、ReAct工具

## 1.8 数据摄入的可扩展性问题

系统难以高效管理和处理大量的数据时出现的问题，导致性能瓶颈和潜在的系统故障

- 并行化提取管道

## 1.9 结构化数据的问答

无法针对结构化数据进行质量保证，解读用户的查询并准确检索到所需要结构化数据是个挑战。

- 链式思维表格包
- 混合自洽查询引擎包

## 1.10 从复杂PDF文档提取数据

从复杂PDF文档（如嵌入表格）提取数据进行回答时，传统检索方法无法达到目的。

- 嵌入式表格检索技术

## 1.11 备用模型策略

使用大模型遇到的问题，如访问频率限制、Token耗尽等，需要备用模型防止出来模型问题。

- Neutrino路由
- OpenRouter

## 1.12 大模型的安全性

- Llama Guard： 保护大模型语音的新工具

  